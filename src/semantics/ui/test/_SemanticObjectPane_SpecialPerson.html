<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">

<title>_SemanticObjectPane Browser Tests - Person</title>

<!-- required: the default dijit theme: -->
<link rel="stylesheet" href="../../../../dojo/resources/dojo.css" />
<link id="themeStyles" rel="stylesheet" href="../../../../dijit/themes/claro/claro.css" />
<style>
  .dijitTextBoxReadOnly {
    border-color: white !important;
  }

  .boldLabel {
    font-size: 90%;
    font-weight: bold;
    margin-top: 4px;
  }

  .fixedLabel {
    width: 4.5em;
    display: inline-block;
    font-size: 90%;
    font-weight: bold;
    margin-top: 4px;
  }

  .fieldsetClass {
    border:2px groove threedface;
    padding: 10px;
  }
</style>


<!-- SCRIPT -->
<script>
  var dojoConfig = {
    async: true,
    parseOnLoad: false,
    has: {
      "dojo-debug-messages": true,
      "mvc-bindings-log-api": true
    }
  };
</script>

<script src="../../../../dojo/dojo.js"></script>

<script type="text/javascript">
require(["dojo/parser",
  "ppwcode/contracts/doh",
  "ppwcode/semantics/SemanticObject",
  "ppwcode/semantics/ui/test/mock/viewmodel/SpecialPerson",
  "dijit/registry",
  "ppwcode/semantics/ui/test/semanticObjectPaneTestGenerator",
  "ppwcode/semantics/ui/test/mock/presentation/SpecialPersonPane",
  "dojo/domReady!"],
  function(parser, doh, SemanticObject, SpecialPerson, registry, generator) {

    var parsePromise = parser.parse();
    parsePromise.then(function() {
      var json = {"name":"Pete Peeters","street":"Avenue de rue 93","zip":"1040 CAA","city":"Cité de Beauté","tel":"0322 44 442 22","email":"jandockx@hhh.org"};

      function createSpecialPerson() {
        var person = new SpecialPerson();
        person.reload(json);
        person.watch(function(propertyName, oldValue, newValue) {
          console.log("changed: " + propertyName + " from " + oldValue + " to " + newValue);
        });
        return person;
      }

      var subject = registry.byId("subject");

      doh.register(
        "_Semantic Object Pane - SpecialPerson",
        generator(subject, SemanticObject, createSpecialPerson, "name", "NEW NAME", "_personPane.txtName")
      );
      doh.run();
    });
  }
);
</script>
</head>

<body class="claro">
<!-- Define an instance of the widget to test. -->
<div id="subject" data-dojo-type="ppwcode/semantics/ui/test/mock/presentation/SpecialPersonPane"></div>
</body>

</html>
