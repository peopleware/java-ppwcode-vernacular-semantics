<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">

<title>_SemanticObjectPane Browser Tests - Person</title>

<!-- required: the default dijit theme: -->
<link rel="stylesheet" href="../../../../../../dojo/dojo/resources/dojo.css" />
<link rel="stylesheet" href="../../../../../../dojo/dijit/themes/claro/claro.css" />


<!-- SCRIPT -->
<script>
  var dojoConfig = {
    async: true,
    parseOnLoad: false,
    has: {
      "dojo-debug-messages": true,
      "mvc-bindings-log-api": true
    },
    paths: {
      "ppwcode/contracts": "../../ppwcode/util/contracts",
      "ppwcode/oddsAndEnds": "../../ppwcode/util/oddsAndEnds",
      "ppwcode/semantics": "../../ppwcode/vernacular/semantics",
      "xstyle": "../../xstyle"
    }
  };
</script>

<script src="../../../../../../dojo/dojo/dojo.js"></script>

<script type="text/javascript">
require(["dojo/parser",
        "ppwcode/contracts/doh",
        "ppwcode/semantics/SemanticObject",
        "ppwcode/semantics/ui/test/mock/SpecialPerson",
        "dijit/registry",
        "ppwcode/semantics/ui/_semanticObjectPane/test/semanticObjectPaneTestGenerator",
        "ppwcode/semantics/ui/_semanticObjectPane/test/mock/SpecialPersonPane",
        "dojo/domReady!"],
  function(parser, doh, SemanticObject, SpecialPerson, registry, generator) {

    var parsePromise = parser.parse();
    parsePromise.then(function() {
      var json = {"name":"Pete Peeters","street":"Avenue de rue 93","zip":"1040 CAA","city":"Cité de Beauté","tel":"0322 44 442 22","email":"jandockx@hhh.org"};

      function createSpecialPerson() {
        var person = new SpecialPerson();
        person.reload(json);
        person.watch(function(propertyName, oldValue, newValue) {
          console.log("changed: " + propertyName + " from " + oldValue + " to " + newValue);
        });
        return person;
      }

      var subject = registry.byId("subject");

      doh.register(
        "_Semantic Object Pane - SpecialPerson",
        generator(subject, SemanticObject, createSpecialPerson, "name", "NEW NAME", "_personPane.txtName")
      );
      doh.run();
    });
  }
);
</script>
</head>

<body class="claro">
<!-- Define an instance of the widget to test. -->
<div id="subject" data-dojo-type="ppwcode/semantics/ui/_semanticObjectPane/test/mock/SpecialPersonPane"></div>
</body>

</html>
